<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>System Failure | The Fastest Way to Switch Free/Paid and NoDo/Mango App Build in Visual Studio</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.59.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link href=https://systemfailure.io/dist/main.css rel=stylesheet type=text/css><meta property="og:title" content="The Fastest Way to Switch Free/Paid and NoDo/Mango App Build in Visual Studio"><meta property="og:description" content="Edit: Added NoDo/Mango switching as well. Simplified changes to .csproj files  How would you like to be able to switch from Free/Paid and NoDo/Mango&#160; for your Windows Phone 7 projects in VS?"><meta property="og:type" content="article"><meta property="og:url" content="https://systemfailure.io/post/the-fastest-way-to-switch-between-freepaid-app-build-in-visual-studio/"><meta property="article:published_time" content="2011-10-01T19:31:43+00:00"><meta property="article:modified_time" content="2011-10-01T19:31:43+00:00"><meta itemprop=name content="The Fastest Way to Switch Free/Paid and NoDo/Mango App Build in Visual Studio"><meta itemprop=description content="Edit: Added NoDo/Mango switching as well. Simplified changes to .csproj files  How would you like to be able to switch from Free/Paid and NoDo/Mango&#160; for your Windows Phone 7 projects in VS?"><meta itemprop=datePublished content="2011-10-01T19:31:43&#43;00:00"><meta itemprop=dateModified content="2011-10-01T19:31:43&#43;00:00"><meta itemprop=wordCount content="425"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="The Fastest Way to Switch Free/Paid and NoDo/Mango App Build in Visual Studio"><meta name=twitter:description content="Edit: Added NoDo/Mango switching as well. Simplified changes to .csproj files  How would you like to be able to switch from Free/Paid and NoDo/Mango&#160; for your Windows Phone 7 projects in VS?"></head><body class="ma0 body-font"><style>.shadow-bottom{-webkit-box-shadow:0 0 15px 0 #afafaf;-moz-box-shadow:0 0 15px 0 #afafaf;box-shadow:0 0 15px 0 #afafaf}.pad-2{padding:2px 0}.sub-space{display:block;font-size:20px;font-weight:400;padding-top:10px}.nested-img img{width:initial;height:auto}a{color:#06f}pre{overflow:auto;color:#ddd;white-space:pre;border:1px solid #41a85f;border-left:none;border-right:none;hyphens:none;position:relative;border-radius:2px;margin-left:-32px;margin-right:-32px;padding:0 16px;box-shadow:0 2px 14px 0 #0b0107}a{text-decoration:none}a:hover{text-decoration:underline}.word-wrap{word-wrap:break-word}.lh-copy{line-height:1.42857143}.title-font{font-weight:700;color:#cecece}.body-font{font-family:segoe ui,Tahoma,Geneva,Verdana,sans-serif}.mw6{max-width:36rem}.mt3and5{margin-top:1.5rem}article{background:#1b1b1b;border-radius:4px 4px}body{background:#2f3031;color:#eee}.main-link{display:block;color:inherit}.main-link:hover{text-decoration:none}.summary-article:hover{box-shadow:0 0 12px 7px rgba(0,0,0,.12)}article img{display:block}.nested-links a{color:#54acd2;font-variant:small-caps;letter-spacing:.8px}.top-link:hover{background:#464646;border-radius:4px;text-decoration:none}.gradient-top{background:#020024;background:linear-gradient(90deg,rgb(121,66,0) 0%,rgb(107,74,0) 35%,rgb(57,42,0) 100%);height:4px;border-radius:4px 4px 0 0}.gradient-top.single,.summary-article:hover .gradient-top{background:linear-gradient(90deg,rgb(19,99,3) 0%,rgb(16,68,52) 35%,rgb(32,45,31) 100%)}</style><header class="mb5 cover bg-top bg-left shadow-bottom" style=background-image:url(https://systemfailure.io/header/tree1.jpg)><div><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l items-center center"><section class="w-100 mw8 center"><a href=https://systemfailure.io/ class="top-link pa3 f5 fw4 hover-white no-underline white-90 dib">System Failure<div class="f7 white-70 pad-2 sub-space">Nokola&#39;s handwritten blog on software and humans.</div></a><div class="flex-l items-center"></div></section></div></nav></div></header><main class="pb7 ph0 ph4-ns ph0-m" role=main><div class="flex-l mt2 mw8 center"><div><article class="center cf word-wrap"><div class="gradient-top single"></div><h1 class="f3 title-font ph4-ns ph3 pt3 mt3">The Fastest Way to Switch Free/Paid and NoDo/Mango App Build in Visual Studio</h1><div class="pa4-ns mw8 pt0 pa3"><p class="f7 pt1 pb3 silver"><span>Oct 1, 2011</span></p><section class="nested-copy-line-height lh-copy f5 nested-links nested-img light-gray"><p><strong>Edit: </strong>Added NoDo/Mango switching as well. Simplified changes to .csproj files</p><p>How would you like to be able to switch from Free/Paid and NoDo/Mango&#160; for your Windows Phone 7 projects in VS?</p><p><a href=/image_37.png><img style=background-image:none;border-right-width:0;padding-left:0;padding-right:0;display:inline;border-top-width:0;border-bottom-width:0;border-left-width:0;padding-top:0 title=image border=0 alt=image src=/image_thumb_36.png width=244 height=150></a>&#160;&#160; <a href=/image_40.png><img style=background-image:none;border-bottom:0;border-left:0;padding-left:0;padding-right:0;display:inline;border-top:0;border-right:0;padding-top:0 title=image border=0 alt=image src=/image_thumb_39.png width=244 height=194></a></p><p>Yes! This will switch my Fantasia Painter app from Paid to Free, and it’s just a build configuration change.</p><p>I’ve been using it for the past 6 months or so. Here’s how to do it:</p><ol><li>Open Configuration Manager and add a “Free – Release” and “Free – Debug”. Add the Mango configurations above if needed.</li><li>Create a Manifest/Free and Manifest/Paid folders in your project. If needed, duplicate these for Mango/NoDo to get 4 total!</li><li>Copy the WMAppManifest.xml from Properties to the two folders you just created. The build action for the new files is None and Copy is Don’t Copy (from the item properties window)</li></ol><p><a href=/image_41.png><img style=background-image:none;border-bottom:0;border-left:0;padding-left:0;padding-right:0;display:inline;border-top:0;border-right:0;padding-top:0 title=image border=0 alt=image src=/image_thumb_40.png width=310 height=408></a></p><p>4. Edit the free WMAppManifest to contain the GUID (Product ID) of your free version. Also change the Title and other fields in the XML as needed</p><p>5. Create a Pre-build event command line (from project properties) to copy the manifests based on the build configuration name:</p><p><font face="courier new">if &quot;$(ConfigurationName)&quot; == &quot;Free - Release&quot; copy &quot;$(ProjectDir)\Manifest\NoDo\Free\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Free - Debug&quot; copy &quot;$(ProjectDir)\Manifest\NoDo\Free\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Release&quot; copy &quot;$(ProjectDir)\Manifest\NoDo\Paid\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Debug&quot; copy &quot;$(ProjectDir)\Manifest\NoDo\Paid\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Mango Free - Release&quot; copy &quot;$(ProjectDir)\Manifest\Free\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Mango Free - Debug&quot; copy &quot;$(ProjectDir)\Manifest\Free\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Mango Release&quot; copy &quot;$(ProjectDir)\Manifest\Paid\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;<br>if &quot;$(ConfigurationName)&quot; == &quot;Mango Debug&quot; copy &quot;$(ProjectDir)\Manifest\Paid\WMAppManifest.xml&quot; &quot;$(ProjectDir)\Properties\WMAppManifest.xml&quot;</font></p><p><a href=/image_39.png><img style=background-image:none;border-right-width:0;padding-left:0;padding-right:0;display:inline;border-top-width:0;border-bottom-width:0;border-left-width:0;padding-top:0 title=image border=0 alt=image src=/image_thumb_38.png width=652 height=460></a></p><p>6. If you’re using the AdControl or other DLLs that are different between Free and Paid, edit the .csproj file to conditionally include them like so:</p><p>&lt;ItemGroup Condition=&quot; $(Configuration.Contains('Free'))&quot;&gt;<br>&#160; &lt;Reference Include=&quot;Microsoft.Advertising.Mobile.UI&quot;&gt;<br>&#160;&#160;&#160; &lt;HintPath&gt;C:\Program Files\Microsoft SDKs\Advertising for Phone\Microsoft.Advertising.Mobile.UI.dll&lt;/HintPath&gt;<br>&#160; &lt;/Reference&gt;<br>&lt;/ItemGroup&gt;</p><p>7. You can also define a conditional variable in project properties FREE_WITH_ADS and then use it from the source file using #if FREE_WITH_ADS. Similarly, define a MANGO variable for Mango so you can do #if MANGO <img style=border-bottom-style:none;border-left-style:none;border-top-style:none;border-right-style:none class="wlEmoticon wlEmoticon-smile" alt=Smile src=/wlEmoticon-smile_9.png></p><p>&#160;</p><p>This concept naturally extends to NoDo/Mango switching. Just make sure to have 4 manifest files and have the word “Mango” in each of the solution/project configurations. Then change the .csproj like so:</p><p>&lt;TargetFrameworkProfile Condition=&quot; $(Configuration.Contains('Mango')) &quot;&gt;WindowsPhone71&lt;/TargetFrameworkProfile&gt;<br>&lt;TargetFrameworkProfile Condition=&quot; !$(Configuration.Contains('Mango')) &quot;&gt;WindowsPhone&lt;/TargetFrameworkProfile&gt;</p><p>Make sure to keep NoDo users happy by providing them with NoDo updates! A lot of people rarely update their phone (just search about the % of iPhone users that updated to the latest version online.) It’s very important to keep your app NoDo-ish <strong>and</strong> Mango-ish in my opinion.</p><p>Hope that helps! Please comment!</p></section><div class=mt5></div><div id=graphcomment></div><script type=text/javascript>window.graphcomment_id='nokola-blog';(function(){var gc=document.createElement('script');gc.type='text/javascript';gc.async=true;gc.src='https://graphcomment.com/js/integration.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(gc);})();</script></div></article></div></div></main><footer class="bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f7 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://systemfailure.io/>&copy; 2019 System Failure</a></div></footer><script src=https://systemfailure.io/dist/app.bundle.js async></script></body></html>