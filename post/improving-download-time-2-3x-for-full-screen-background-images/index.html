<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>System Failure | Improving Download Time (2-3x) for Full Screen Background Images</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.59.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link href=https://systemfailure.io/dist/main.css rel=stylesheet type=text/css><meta property="og:title" content="Improving Download Time (2-3x) for Full Screen Background Images"><meta property="og:description" content="Getting your backgrounds quickly is very important for games, especially at startup time when you're downloading a lot of stuff anyway (like menu buttons, simple effects, such as explosions and other things that didn't make it into the &#34;core&#34; xap to reduce initial load time).
Since you are full screen, it is a good idea to detect the resolution (that would be the ActualWidth and ActualHeight properties of your root control) and programatically return a suitable sized background."><meta property="og:type" content="article"><meta property="og:url" content="https://systemfailure.io/post/improving-download-time-2-3x-for-full-screen-background-images/"><meta property="article:published_time" content="2010-01-04T10:57:00+00:00"><meta property="article:modified_time" content="2010-01-04T10:57:00+00:00"><meta itemprop=name content="Improving Download Time (2-3x) for Full Screen Background Images"><meta itemprop=description content="Getting your backgrounds quickly is very important for games, especially at startup time when you're downloading a lot of stuff anyway (like menu buttons, simple effects, such as explosions and other things that didn't make it into the &#34;core&#34; xap to reduce initial load time).
Since you are full screen, it is a good idea to detect the resolution (that would be the ActualWidth and ActualHeight properties of your root control) and programatically return a suitable sized background."><meta itemprop=datePublished content="2010-01-04T10:57:00&#43;00:00"><meta itemprop=dateModified content="2010-01-04T10:57:00&#43;00:00"><meta itemprop=wordCount content="433"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Improving Download Time (2-3x) for Full Screen Background Images"><meta name=twitter:description content="Getting your backgrounds quickly is very important for games, especially at startup time when you're downloading a lot of stuff anyway (like menu buttons, simple effects, such as explosions and other things that didn't make it into the &#34;core&#34; xap to reduce initial load time).
Since you are full screen, it is a good idea to detect the resolution (that would be the ActualWidth and ActualHeight properties of your root control) and programatically return a suitable sized background."></head><body class="ma0 body-font"><style>.shadow-bottom{-webkit-box-shadow:0 0 15px 0 #afafaf;-moz-box-shadow:0 0 15px 0 #afafaf;box-shadow:0 0 15px 0 #afafaf}.pad-2{padding:2px 0}.sub-space{display:block;font-size:20px;font-weight:400;padding-top:10px}.nested-img img{width:initial;height:auto}a{color:#06f}pre{overflow:auto;color:#ddd;white-space:pre;border:1px solid #41a85f;border-left:none;border-right:none;hyphens:none;position:relative;border-radius:2px;margin-left:-32px;margin-right:-32px;padding:0 16px;box-shadow:0 2px 14px 0 #0b0107}a{text-decoration:none}a:hover{text-decoration:underline}.word-wrap{word-wrap:break-word}.lh-copy{line-height:1.42857143}.title-font{font-weight:700;color:#cecece}.body-font{font-family:segoe ui,Tahoma,Geneva,Verdana,sans-serif}.mw6{max-width:36rem}.mt3and5{margin-top:1.5rem}article{background:#1b1b1b;border-radius:4px 4px}body{background:#2f3031;color:#eee}.main-link{display:block;color:inherit}.main-link:hover{text-decoration:none}.summary-article:hover{box-shadow:0 0 12px 7px rgba(0,0,0,.12)}article img{display:block}.nested-links a{color:#54acd2;font-variant:small-caps;letter-spacing:.8px}.top-link:hover{background:#464646;border-radius:4px;text-decoration:none}.gradient-top{background:#020024;background:linear-gradient(90deg,rgb(121,66,0) 0%,rgb(107,74,0) 35%,rgb(57,42,0) 100%);height:4px;border-radius:4px 4px 0 0}.gradient-top.single,.summary-article:hover .gradient-top{background:linear-gradient(90deg,rgb(19,99,3) 0%,rgb(16,68,52) 35%,rgb(32,45,31) 100%)}</style><header class="mb5 cover bg-top bg-left shadow-bottom" style=background-image:url(https://systemfailure.io/header/tree1.jpg)><div><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l items-center center"><section class="w-100 mw8 center"><a href=https://systemfailure.io/ class="top-link pa3 f5 fw4 hover-white no-underline white-90 dib">System Failure<div class="f7 white-70 pad-2 sub-space">Nokola&#39;s handwritten blog on software and humans.</div></a><div class="flex-l items-center"></div></section></div></nav></div></header><main class="pb7 ph0 ph4-ns" role=main><div class="flex-l mt2 mw8 center"><div><article class="center cf word-wrap"><div class="gradient-top single"></div><h1 class="f3 title-font ph4 pt3 mt3">Improving Download Time (2-3x) for Full Screen Background Images</h1><div class="pa4 mw8 pt0"><p class="f7 pt1 pb3 silver"><span>Jan 4, 2010</span></p><section class="nested-copy-line-height lh-copy f5 nested-links nested-img light-gray"><p>Getting your backgrounds quickly is very important for games, especially at startup time when you're downloading a lot of stuff anyway (like menu buttons, simple effects, such as explosions and other things that didn't make it into the "core" xap to reduce initial load time).</p><p>Since you are full screen, it is a good idea to detect the resolution (that would be the ActualWidth and ActualHeight properties of your root control) and programatically return a suitable sized background.</p><p>For example, a 1920x1080 JPG image is about 200K while the same image 800x600 is about 50K.</p><p>The source code is simple, but I post it in case someone needs it and doesn't have to write it from scratch:</p><p>[code:c#]</p><p>/// &lt;summary&gt;<br>/// The background resolutions available<br>/// &lt;/summary&gt;<br>private static int[] _resAvailable = new int[] { 800, 1024, 1280, 1600, 1920 };</p><p>/// &lt;summary&gt;<br>/// Returns the most appropriate resolution from the list of available resolutions for the background images<br>/// Best resolution is defined as the closest resolution that is bigger than the resolution input as an argument<br>/// &lt;/summary&gt;<br>/// &lt;param name="currentXResolution"&gt;&lt;/param&gt;<br>/// &lt;returns&gt;&lt;/returns&gt;<br>private static int GetBestStockResolution(int currentXResolution) {<br>&nbsp;&nbsp;&nbsp; int count = _resAvailable.Length;</p><p>&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; count; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_resAvailable[i] &gt;= currentXResolution) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return _resAvailable[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }</p><p>&nbsp;&nbsp;&nbsp; // no suitable resolution found, return largest<br>&nbsp;&nbsp;&nbsp; return _resAvailable[count - 1];<br>}</p><p>/// &lt;summary&gt;<br>/// Determines the correct url for an image based on teh current resolution and short image name<br>/// &lt;/summary&gt;<br>/// &lt;param name="imageShortName"&gt;the short name of the image (e.g. "shockLord"&lt;/param&gt;<br>/// &lt;returns&gt;url to the image, including resolution (<a href=http://.../image1920.jpg>http://.../image1920.jpg</a>) &lt;/returns&gt;<br>public static string GetBackgroundImageUrl(string imageShortName) {<br>&nbsp;&nbsp;&nbsp; return String.Format("<a href=http://www.mysite.com/images/{0}{1}.jpg>http://www.mysite.com/images/{0}{1}.jpg</a>", imageShortName, GetBestStockResolution((int)Globals.XResolution));<br>}<br>[/code]&nbsp;</p><p>In the above code Globals.XResolution is set to the current full screen resolution when the player clicks play to go full screen.</p><p>To use the code, you need to have the same image with various resolutions, e.g. mysite.com/images/background1920.jpg, mysite.com/images/background1024.jpg and so on.</p><p>Last but not least, you can use a low-quality background image when the game goes full screen for the first time, and then replace it with the high-quality image once available. I made a special control just for that: SmoothImage in the <a id=ctl00_ContentPlaceHolder1_HyperLink9 href=MoreControls.zip>Controls Pack</a>&nbsp;on Nokola.com. The SmoothImage control will preserve its previous image, whenever you change it's Source and will display the new image once it's available. You can see the SmoothImage sample by launching <a href=http://nokola.com/shock>http://nokola.com/shock</a>&nbsp;and switching between the classes - note how the backroung changes "smoothly" and you don't see a period of transparent/missing image background while the new background gets downloaded.</p><p>&nbsp;</p></section><div class=mt5></div><div id=graphcomment></div><script type=text/javascript>window.graphcomment_id='nokola-blog';(function(){var gc=document.createElement('script');gc.type='text/javascript';gc.async=true;gc.src='https://graphcomment.com/js/integration.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(gc);})();</script></div></article></div></div></main><footer class="bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f7 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://systemfailure.io/>&copy; 2019 System Failure</a></div></footer><script src=https://systemfailure.io/dist/app.bundle.js async></script></body></html>