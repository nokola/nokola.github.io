<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>You Had Me At &#39;Hello World&#39;  | Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.31.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    <link href='https://nokola.github.io/dist/main.css' rel='stylesheet' type="text/css" />
    
      
    

    

    <meta property="og:title" content="Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)" />
<meta property="og:description" content="Here&#39;s a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!
[code:c#]
Stream stream = Application.GetResourceStream(new Uri(&#34;SilverlightApplication1;component/Images/test.jpg&#34;, UriKind.Relative)).Stream;
WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage
result.SetSource(stream);
Image image = new Image();
image.Effect = new BlurEffect(); // any pixel shader effect
image.Source = result; // set the image to the original
result.Render(image, null);
result.Invalidate(); // render the pixel shader" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nokola.github.io/post/calculating-shader-effects-in-writeablebitmap-fast-float-computations-and-more/" />



<meta property="article:published_time" content="2010-01-11T09:27:00&#43;00:00"/>

<meta property="article:modified_time" content="2010-01-11T09:27:00&#43;00:00"/>











<meta itemprop="name" content="Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)">
<meta itemprop="description" content="Here&#39;s a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!
[code:c#]
Stream stream = Application.GetResourceStream(new Uri(&#34;SilverlightApplication1;component/Images/test.jpg&#34;, UriKind.Relative)).Stream;
WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage
result.SetSource(stream);
Image image = new Image();
image.Effect = new BlurEffect(); // any pixel shader effect
image.Source = result; // set the image to the original
result.Render(image, null);
result.Invalidate(); // render the pixel shader">


<meta itemprop="datePublished" content="2010-01-11T09:27:00&#43;00:00" />
<meta itemprop="dateModified" content="2010-01-11T09:27:00&#43;00:00" />
<meta itemprop="wordCount" content="256">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)"/>
<meta name="twitter:description" content="Here&#39;s a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!
[code:c#]
Stream stream = Application.GetResourceStream(new Uri(&#34;SilverlightApplication1;component/Images/test.jpg&#34;, UriKind.Relative)).Stream;
WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage
result.SetSource(stream);
Image image = new Image();
image.Effect = new BlurEffect(); // any pixel shader effect
image.Source = result; // set the image to the original
result.Render(image, null);
result.Invalidate(); // render the pixel shader"/>

  </head>

  <body class="ma0 baskerville  bg-near-white">
    <style>
      .shadow-bottom {
        -webkit-box-shadow: 0px 0px 15px 0px rgba(175, 175, 175, 1);
        -moz-box-shadow:    0px 0px 15px 0px rgba(175, 175, 175, 1);
        box-shadow:         0px 0px 15px 0px rgba(175, 175, 175, 1);
      }
      .pad-2 {
        padding: 2px 0;
      }
      .sub-space {
        letter-spacing: 0.4px;
      }
      .nested-img img {
        width: initial;
      }
    </style>
    



  
  
    <header class="cover bg-top bg-left shadow-bottom" style="background-image: url('https://nokola.github.io/header/tree1.jpg');">
  
    <div>
      
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://nokola.github.io/" class="f5 fw2 hover-white no-underline white-90 dib">
      You Had Me At &#39;Hello World&#39;
      <div class="f7 white-70 pad-2 sub-space">Design, Coding, and Special Effects</div>
    </a>
    <div class="flex-l items-center">
      
      








    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
<div class="flex-l mt2 mw8 center">
 <article class="center cf pt4 pb1  ph3 ph4-ns mw10">
     <h1 class="f2 mt0 athelas">
     Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)
     </h1>
     <time class="f6  pb1 dib mid-gray normal" datetime="2010-01-11T09:27:00Z">
      Jan 11, 2010
     </time>

     
     
   <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray">
     <p>Here's a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!</p>
<p>[code:c#]</p>
<p>Stream stream = Application.GetResourceStream(new Uri("SilverlightApplication1;component/Images/test.jpg", UriKind.Relative)).Stream;<br />WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage<br />result.SetSource(stream);</p>
<p>Image image = new Image();<br />image.Effect = new BlurEffect(); // any pixel shader effect<br />image.Source = result; // set the image to the original<br />result.Render(image, null);<br />result.Invalidate(); // render the pixel shader<br />image.Source = null; // release the bitmap reference<br />image.Effect = null;<br />GC.Collect(); // remove all obsolete bitmaps from memory [optional]<br />// result contains the image with shader effect applied! assign it to any Image.Source!<br />myImage.Source = result;<br />[/code]</p>
<p>For the sample, I used InvertColorEffect() that I had on my PC, but you could try with your own (or just use the BlurEffect() to see how it works).</p>
<p>Note that the image doesn't even have to be part of the UI tree, and you don't have to wait for a render pass!</p>
<h2>Why is this good?</h2>
<p>In an apples-to-apples comparison (float computations) pixel shaders are much faster than managed code. See <a href="http://kodierer.blogspot.com/2009/08/silverlight-3-writeablebitmap.html">http://kodierer.blogspot.com/2009/08/silverlight-3-writeablebitmap.html</a>&nbsp;for performance comparison. This means that you can now run even faster computations from managed code in Silverlight!</p>
<p>Also in case Silverlight eventually executes shaders on the GPU (I don't know what is the plan about that), your applications will really be able to benefit from the fast computations!</p>
<p>There is also one other reason why is it so good: but I'll mention it in a later post (working on secret project now...) :)</p>
<p>&nbsp;</p>

   </section>
   


   <div class="mt5"></div>
   
<div id="graphcomment"></div>
<script type="text/javascript">
  window.graphcomment_id = 'nokola-blog';
  (function() {
    var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
    gc.src = 'https://graphcomment.com/js/integration.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
  })();
</script>

  </article>
 
</div>

    </main>
    <footer class="bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f7 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://nokola.github.io/" >
    &copy; 2017 You Had Me At &#39;Hello World&#39;
  </a>
  








  </div>
</footer>

    <script src="https://nokola.github.io/dist/app.bundle.js" async></script>

  </body>
</html>
