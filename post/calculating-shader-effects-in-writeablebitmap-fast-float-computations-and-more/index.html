<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>System Failure  | Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.55.4" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    <link href='https://systemfailure.io/dist/main.css' rel='stylesheet' type="text/css" />
    
      
    

    

    <meta property="og:title" content="Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)" />
<meta property="og:description" content="Here&#39;s a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!
[code:c#]
Stream stream = Application.GetResourceStream(new Uri(&#34;SilverlightApplication1;component/Images/test.jpg&#34;, UriKind.Relative)).Stream;
WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage
result.SetSource(stream);
Image image = new Image();
image.Effect = new BlurEffect(); // any pixel shader effect
image.Source = result; // set the image to the original
result.Render(image, null);
result.Invalidate(); // render the pixel shader" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://systemfailure.io/post/calculating-shader-effects-in-writeablebitmap-fast-float-computations-and-more/" />
<meta property="article:published_time" content="2010-01-11T09:27:00&#43;00:00"/>
<meta property="article:modified_time" content="2010-01-11T09:27:00&#43;00:00"/>

<meta itemprop="name" content="Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)">
<meta itemprop="description" content="Here&#39;s a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!
[code:c#]
Stream stream = Application.GetResourceStream(new Uri(&#34;SilverlightApplication1;component/Images/test.jpg&#34;, UriKind.Relative)).Stream;
WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage
result.SetSource(stream);
Image image = new Image();
image.Effect = new BlurEffect(); // any pixel shader effect
image.Source = result; // set the image to the original
result.Render(image, null);
result.Invalidate(); // render the pixel shader">


<meta itemprop="datePublished" content="2010-01-11T09:27:00&#43;00:00" />
<meta itemprop="dateModified" content="2010-01-11T09:27:00&#43;00:00" />
<meta itemprop="wordCount" content="256">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)"/>
<meta name="twitter:description" content="Here&#39;s a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!
[code:c#]
Stream stream = Application.GetResourceStream(new Uri(&#34;SilverlightApplication1;component/Images/test.jpg&#34;, UriKind.Relative)).Stream;
WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage
result.SetSource(stream);
Image image = new Image();
image.Effect = new BlurEffect(); // any pixel shader effect
image.Source = result; // set the image to the original
result.Render(image, null);
result.Invalidate(); // render the pixel shader"/>

  </head>

  <body class="ma0 body-font">
    <style>
      .shadow-bottom {
        -webkit-box-shadow: 0px 0px 15px 0px rgba(175, 175, 175, 1);
        -moz-box-shadow:    0px 0px 15px 0px rgba(175, 175, 175, 1);
        box-shadow:         0px 0px 15px 0px rgba(175, 175, 175, 1);
      }
      .pad-2 {
        padding: 2px 0;
      }
      .sub-space {
        letter-spacing: 0.4px;
      }
      .nested-img img {
        width: initial;
        height: auto;
      }
      a {
        color: #0066ff;
      }
      pre {
        overflow: auto;
        background-color: #e1e1e1;
      }
      a {
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      .word-wrap {
        word-wrap: break-word;
      }
      .lh-copy {
        line-height: 1.42857143;
      }
      .title-font {
        font-weight: 700;
        color: #333;
        border-bottom: 1px solid #333;
         
      }
      .body-font {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      .mw6 {
        max-width: 36rem;
      }
      .mt3and5 {
        margin-top: 1.5rem;
      }
      article {
        background: white;
        border-radius: 3px;
      }
      body {
        background: #ecf0f5;
      }
      .main-link {
        display: block;
        color: inherit;

         
      }
      .main-link:hover {
        text-decoration: none;
        box-shadow: 0 0 10px 3px rgba(0,0,0,.12);
      }
    </style>
    



  
  
    <header class="cover bg-top bg-left shadow-bottom" style="background-image: url('https://systemfailure.io/header/tree1.jpg');">
  
    <div>
      
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l  items-center center">
    <section class="w-100 mw8 center">
      <a href="https://systemfailure.io/" class="f5 fw4 hover-white no-underline white-90 dib">
        System Failure
        <div class="f7 white-70 pad-2 sub-space">Software for humans</div>
      </a>
      <div class="flex-l items-center">
        
        








      </div>
    </section>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7 ph3 pt2 ph4-ns" role="main">
      
<div class="flex-l mt2 mw8 center">
  <div>
    <a href="javascript:history.go(-1)">‚Üê back</a>
    <article class="center cf word-wrap mt3">
      <h1 class="f3 title-font pl4 pt4 pb3 mt2">
        Calculating Shader Effects in WriteableBitmap (Fast Float Computations And More)
      </h1>

      <div class="pa4 mw8 pt2">
        <p class="f7 pt1 pb0 mv0 mid-gray">
          
          <span>Jan 11, 2010</span>
          

          </p>

        
        
        <section class="nested-copy-line-height lh-copy f5 nested-links nested-img dark-gray">
          <p>Here's a small code snippet that allows you to calculate any pixel shader and get the output into a WriteableBitmap!</p>
<p>[code:c#]</p>
<p>Stream stream = Application.GetResourceStream(new Uri("SilverlightApplication1;component/Images/test.jpg", UriKind.Relative)).Stream;<br />WriteableBitmap result = new WriteableBitmap(1, 1); // avoid creating intermediate BitmapImage<br />result.SetSource(stream);</p>
<p>Image image = new Image();<br />image.Effect = new BlurEffect(); // any pixel shader effect<br />image.Source = result; // set the image to the original<br />result.Render(image, null);<br />result.Invalidate(); // render the pixel shader<br />image.Source = null; // release the bitmap reference<br />image.Effect = null;<br />GC.Collect(); // remove all obsolete bitmaps from memory [optional]<br />// result contains the image with shader effect applied! assign it to any Image.Source!<br />myImage.Source = result;<br />[/code]</p>
<p>For the sample, I used InvertColorEffect() that I had on my PC, but you could try with your own (or just use the BlurEffect() to see how it works).</p>
<p>Note that the image doesn't even have to be part of the UI tree, and you don't have to wait for a render pass!</p>
<h2>Why is this good?</h2>
<p>In an apples-to-apples comparison (float computations) pixel shaders are much faster than managed code. See <a href="http://kodierer.blogspot.com/2009/08/silverlight-3-writeablebitmap.html">http://kodierer.blogspot.com/2009/08/silverlight-3-writeablebitmap.html</a>&nbsp;for performance comparison. This means that you can now run even faster computations from managed code in Silverlight!</p>
<p>Also in case Silverlight eventually executes shaders on the GPU (I don't know what is the plan about that), your applications will really be able to benefit from the fast computations!</p>
<p>There is also one other reason why is it so good: but I'll mention it in a later post (working on secret project now...) :)</p>
<p>&nbsp;</p>

        </section>
        


        <div class="mt5"></div>
        
<div id="graphcomment"></div>
<script type="text/javascript">
  window.graphcomment_id = 'nokola-blog';
  (function() {
    var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
    gc.src = 'https://graphcomment.com/js/integration.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
  })();
</script>

      </div>
    </article>
  </div>
</div>

    </main>
    <footer class="bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f7 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://systemfailure.io/" >
    &copy; 2019 System Failure
  </a>
  








  </div>
</footer>

    <script src="https://systemfailure.io/dist/app.bundle.js" async></script>

  </body>
</html>
