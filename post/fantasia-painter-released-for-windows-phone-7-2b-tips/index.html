<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>System Failure | Fantasia Painter Released for Windows Phone 7 &#43; Tips</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.59.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link href=https://systemfailure.io/dist/main.css rel=stylesheet type=text/css><meta property="og:title" content="Fantasia Painter Released for Windows Phone 7 &#43; Tips"><meta property="og:description" content="Edit Dec 8, 2010: Updated tips (I was too excited the first release and missed some important info in the “how to speed load/save state tip #3)
Yes! See the 1-minute intro HD video of the drawing app below. In this version, you can add makeup to someone’s face, change eye color (or other colors). It also comes with all-new fur smudge, and color reveal/hide brushes as well as rainbow mode for all existing Fantasia brushes."><meta property="og:type" content="article"><meta property="og:url" content="https://systemfailure.io/post/fantasia-painter-released-for-windows-phone-7-2b-tips/"><meta property="article:published_time" content="2010-12-05T04:06:02+00:00"><meta property="article:modified_time" content="2010-12-05T04:06:02+00:00"><meta itemprop=name content="Fantasia Painter Released for Windows Phone 7 &#43; Tips"><meta itemprop=description content="Edit Dec 8, 2010: Updated tips (I was too excited the first release and missed some important info in the “how to speed load/save state tip #3)
Yes! See the 1-minute intro HD video of the drawing app below. In this version, you can add makeup to someone’s face, change eye color (or other colors). It also comes with all-new fur smudge, and color reveal/hide brushes as well as rainbow mode for all existing Fantasia brushes."><meta itemprop=datePublished content="2010-12-05T04:06:02&#43;00:00"><meta itemprop=dateModified content="2010-12-05T04:06:02&#43;00:00"><meta itemprop=wordCount content="922"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Fantasia Painter Released for Windows Phone 7 &#43; Tips"><meta name=twitter:description content="Edit Dec 8, 2010: Updated tips (I was too excited the first release and missed some important info in the “how to speed load/save state tip #3)
Yes! See the 1-minute intro HD video of the drawing app below. In this version, you can add makeup to someone’s face, change eye color (or other colors). It also comes with all-new fur smudge, and color reveal/hide brushes as well as rainbow mode for all existing Fantasia brushes."></head><body class="ma0 body-font"><style>.shadow-bottom{-webkit-box-shadow:0 0 15px 0 #afafaf;-moz-box-shadow:0 0 15px 0 #afafaf;box-shadow:0 0 15px 0 #afafaf}.pad-2{padding:2px 0}.sub-space{display:block;font-size:20px;font-weight:400;padding-top:10px}.nested-img img{width:initial;height:auto}a{color:#06f}pre{overflow:auto;color:#ddd;white-space:pre;border:1px solid #41a85f;border-left:none;border-right:none;hyphens:none;position:relative;border-radius:2px;margin-left:-32px;margin-right:-32px;padding:0 16px;box-shadow:0 2px 14px 0 #0b0107}a{text-decoration:none}a:hover{text-decoration:underline}.word-wrap{word-wrap:break-word}.lh-copy{line-height:1.42857143}.title-font{font-weight:700;color:#cecece}.body-font{font-family:segoe ui,Tahoma,Geneva,Verdana,sans-serif}.mw6{max-width:36rem}.mt3and5{margin-top:1.5rem}article{background:#1b1b1b;border-radius:4px 4px}body{background:#2f3031;color:#eee}.main-link{display:block;color:inherit}.main-link:hover{text-decoration:none}.summary-article:hover{box-shadow:0 0 12px 7px rgba(0,0,0,.12)}article img{display:block}.nested-links a{color:#54acd2;font-variant:small-caps;letter-spacing:.8px}.top-link:hover{background:#464646;border-radius:4px;text-decoration:none}.gradient-top{background:#020024;background:linear-gradient(90deg,rgb(121,66,0) 0%,rgb(107,74,0) 35%,rgb(57,42,0) 100%);height:4px;border-radius:4px 4px 0 0}.gradient-top.single,.summary-article:hover .gradient-top{background:linear-gradient(90deg,rgb(19,99,3) 0%,rgb(16,68,52) 35%,rgb(32,45,31) 100%)}.utterances{margin-left:0}</style><header class="mb5 cover bg-top bg-left" style=background-image:url(https://systemfailure.io/header/tree1.jpg)><div><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l items-center center"><section class="w-100 mw8 center"><a href=https://systemfailure.io/ class="top-link pa3 f5 fw4 hover-white no-underline white-90 dib"><div class="f7 white-70 pad-2 sub-space">Nokola&#39;s blog on software and humans.</div></a><div class="flex-l items-center"></div></section></div></nav></div></header><main class="pb7 ph0 ph4-ns ph0-m" role=main><div class="flex-l mt2 mw8 center"><div><article class="center cf word-wrap"><div class="gradient-top single"></div><h1 class="f3 title-font ph4-ns ph3 pt3 mt3">Fantasia Painter Released for Windows Phone 7 &#43; Tips</h1><div class="ph4-ns mw8 ph3 pb2"><p class="f7 pt1 pb3 silver"><span>Dec 5, 2010</span></p><section class="nested-copy-line-height lh-copy f5 nested-links nested-img light-gray"><p><strong>Edit Dec 8, 2010: Updated tips (I was too excited the first release and missed some important info in the “how to speed load/save state tip #3)</strong></p><p>Yes! See the 1-minute intro HD video of the drawing app below. In this version, you can add makeup to someone’s face, change eye color (or other colors). It also comes with all-new fur smudge, and color reveal/hide brushes as well as rainbow mode for all existing Fantasia brushes. Pinch to zoom and move with 2 fingers.</p><p><a href="http://social.zune.net/redirect?type=phoneApp&amp;id=1e2ccc81-d2f9-df11-9264-00237de2db9e">Click here to try or buy Fantasia Painter for your Windows Phone 7</a></p><object width=640 height=386><param name=movie value=https://www.youtube.com/v/RgUNujj7sHk></param><param name=allowFullScreen value=true></param><param name=allowScriptAccess value=always></param><embed src=https://www.youtube.com/v/RgUNujj7sHk type=application/x-shockwave-flash allowfullscreen allowscriptaccess=always width=640 height=386></embed></object><p>Here is a little longer (2 minutes) video that shows some of the Fantasia Painter’s drawing capabilities in action:</p><object width=640 height=386><param name=movie value=https://www.youtube.com/v/KjwtlVnXbSg></param><param name=allowFullScreen value=true></param><param name=allowScriptAccess value=always></param><embed src=https://www.youtube.com/v/KjwtlVnXbSg type=application/x-shockwave-flash allowfullscreen allowscriptaccess=always width=640 height=386></embed></object><p>Note: I forgot to mention that you can <strong>pinch to Zoom to paint small details</strong> (this allows you to draw the small details on the birdie on an actual device, not just the emulator).</p><h3><a href="http://social.zune.net/redirect?type=phoneApp&amp;id=1e2ccc81-d2f9-df11-9264-00237de2db9e">Click here to buy Fantasia Painter for your Windows Phone 7</a> (trial mode supported as well)</h3><h3>Please feel free to send link to this blog to everyone, try, buy, and/or play with the app! I appreciate it!</h3><p>&#160;</p><h2>Technical Details and Tips</h2><p>The phone version also supports “painting with effect” like the desktop version. For now I have a couple of simple effects that are only exposed through brushes (such as Saturation and Tint). I also added blending modes, which allow for “lighter” and “darker” makeup. The new brushes/effects share the same code (I add reference to the same DLL) as the web Silverlight version of Fantasia and go through the same effect pipeline, which is great! <img style=border-bottom-style:none;border-left-style:none;border-top-style:none;border-right-style:none class="wlEmoticon wlEmoticon-smile" alt=Smile src=/wlEmoticon-smile_3.png></p><p>While developing Fantasia for Windows Phone 7, I noticed collected some useful tips for developers that will hopefully make your life easier. There were some nasty crashes that were hard to find.</p><p><strong>Tip 1: Preventing crash/hangup when using TouchPanel and Touch classes</strong></p><blockquote><p>I’m using TouchPanel and Touch for the pinch-to-zoom and move with 2 fingers capabilities. Can you tell what’s wrong with this code:</p><p>public partial class MainPage : PhoneApplicationPage<br>{<br>&#160;&#160;&#160; // Constructor</p><p><strong>&#160;&#160;&#160; public MainPage()</strong><br>&#160;&#160;&#160; {<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160; InitializeComponent();</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <strong>Touch.FrameReported += Touch_FrameReported;</strong></p><p>If you do something like what I did above, you’ll face a very weird issue – when navigating using NavitationService.Navigate() instead of using the back button on the phone, you’ll get a seemingly-random exception for a missing element. What’s going on?</p><p>In Windows Phone 7 your page can be created/destroyed whenever it’s not visible (read about Tombstoning). What is interesting though is that if you use NavigationService.Navigate(), your page may be re-created if it was not visible for long time even if your application is still running. The old page should get garbage collected – right? Actually it’s not, since you have the static Touch class referencing a function from your page. Thus, whenever the user taps on the phone, you’ll get a function call in a page that is invalid.</p><p>To fix the above issue, override OnNavigatedTo and OnNavigatedFrom and Touch.FrameReported += Touch_FrameReported; and Touch.FrameReported -= Touch_FrameReported; This way your page will get recycled correctly</p></blockquote><p><strong>Tip 2:</strong> <strong>Use Windows Snippping Tool </strong>to get perfect 480x800 screenshots of the Windows Phone 7 emulator.</p><blockquote><p>This really saved me a lot of time. In the Windows start menu search, type “snip” and open the snipping tool. Open the “New” menu and select “Window Snip”. Click on the emulator window (the emulator zoom should be at 100%). You’re done!</p></blockquote><p><strong>Tip 3: Faster state load/save using isolated storage</strong></p><blockquote><p>I noticed an interesting issue: the first time I deployed Fantasia on a real device, loading the state using IsolatedStorageSettings (8 int variables and the picture bitmap), took about 8 seconds! Way too long <img style=border-bottom-style:none;border-left-style:none;border-top-style:none;border-right-style:none class="wlEmoticon wlEmoticon-smile" alt=Smile src=/wlEmoticon-smile_3.png></p><p>Using IsolatedStorageFile to do the same thing takes &lt;0.2 sec on my Samsung Focus.</p><p>IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication();<br>IsolatedStorageFileStream file = storage.OpenFile(“myfile.dat”, System.IO.FileMode.Open);<br>byte[] data = new byte[file.Length];<br>file.Read(data, 0, data.Length);<br>file.Close();</p></blockquote><p><strong>Tip 4:</strong>&#160;<strong>WriteableBitmap render speed</strong></p><blockquote><p>WriteableBitmap.Render() was considerably slow on the device compared to PC, to the point where a single stroke would have 0.5 seconds lag for several lines. Thus I had to completely redo the Silverlight line rendering in code, which managed to speed up the whole drawing quite a bit (somewhere between 10 and 100 times). I also improved my brush rendering by avoiding redrawing pixels when they are already drawn and by using optimizations such as drawing one pixel with opacity X*10 instead of 10 pixel with opacity X (another huge speed improvement there.)</p><p>Invalidate(): Turns out, the performance here wasn’t too bad. It’s still wise to avoid Invalidate() I could achieve noticeably faster speed by reducing the number of Invalidate() calls per second.</p></blockquote><p><strong>Tip 5: Preventing the panorama and pivots from scrolling</strong></p><blockquote><p>I needed this functionality in order to have the color pickers work as expected and not scroll the view.</p><p>This post has sample code: <a href=http://blogs.msdn.com/b/luc/archive/2010/11/22/preventing-the-pivot-or-panorama-controls-from-scrolling.aspx>http://blogs.msdn.com/b/luc/archive/2010/11/22/preventing-the-pivot-or-panorama-controls-from-scrolling.aspx</a></p><p>Unfortunately, the above code suffers a similar crashing issue like in Tip 1 above. It’s fairly easy to fix by ensuring the events are unhooked as appropriate. I will likely post the fixed version sometime soon (unless someone else does).</p></blockquote><p>I did 1 month of usability testing (let’s hope it was worth it!) Will publish more info at a later date. There are some very interesting findings such as what is a good color picker, slider, etc.</p><p>That’s all for now! Please remember to try out Fantasia Painter, if you’d like it buy it, review, send it to friends, tweet it, facebook it, etc!</p><p>I appreciate it! Please send me comments here or in the reviews on the Phone!</p></section><div class=mt5></div><script src=https://utteranc.es/client.js repo=nokola/blog issue-term=pathname label=comment theme=github-dark crossorigin=anonymous async></script></div></article></div></div></main><footer class="bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f7 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://systemfailure.io/>&copy; 2020 System Failure</a></div></footer><script src=https://systemfailure.io/dist/app.bundle.js async></script></body></html>